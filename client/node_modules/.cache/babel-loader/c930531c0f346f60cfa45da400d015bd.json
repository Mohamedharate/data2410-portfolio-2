{"ast":null,"code":"import _regeneratorRuntime from\"/home/group16/data2410-portfolio-2/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/group16/data2410-portfolio-2/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/home/group16/data2410-portfolio-2/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/group16/data2410-portfolio-2/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/group16/data2410-portfolio-2/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/group16/data2410-portfolio-2/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/group16/data2410-portfolio-2/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/group16/data2410-portfolio-2/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import axios from\"axios\";import LoadingSpinnerLargeSuccess from\"../Spinners/LoadingSpinnerLargeSuccess\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AddReview=/*#__PURE__*/function(_Component){_inherits(AddReview,_Component);var _super=_createSuper(AddReview);function AddReview(props){var _this;_classCallCheck(this,AddReview);_this=_super.call(this,props);_this.handleChange=function(event){var target=event.target;var value=target.value;var name=target.name;_this.setState(_defineProperty({},name,value));};_this.handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_this.setState({toggle_spinner:true});_context.next=4;return axios({method:'post',url:'/api/products/addReview/'+_this.props.match.params.itemId,data:{user:_this.state.user_name,reviewText:_this.state.message,rating:_this.state.rating}}).then(function(response){console.log(\"Data: \",response.data);this.setState({reviewText:response.data.message});}).catch(function(error){if(error.response){console.log(error.response.data);}});case 4:_this.setState({toggle_spinner:false,review_sent:true});case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.state={dateTime:new Date().toDateString(),message:'',rating:'',user_name:'',email:'',toggle_spinner:false,review_sent:false};_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));return _this;}_createClass(AddReview,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var that;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:that=this;_context2.next=3;return axios({method:\"get\",url:'https://localhost:3001/api/products/get/'+this.props.match.params.itemId}).then(function(response){that.setState({name:response.data.name,image:\"data:image/png;base64,\"+response.data.imageUrl[0].image,itemId:response.data.itemId});}).catch(function(error){if(!error.data){console.log(error.data);}console.log(error);});case 3:case\"end\":return _context2.stop();}}},_callee2,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var reviewStars=this.state.reviewStars;var options=[{label:\"1\",value:\"1\"},{label:\"2\",value:\"2\"},{label:\"3\",value:\"3\"},{label:\"4\",value:\"4\"},{label:\"5\",value:\"5\"}];return/*#__PURE__*/_jsx(\"div\",{className:\"review\",children:/*#__PURE__*/_jsx(\"div\",{className:\"productContainer\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-1\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-lg-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header\",children:[\"Add review for item \",this.state.name]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsx(\"form\",{onSubmit:this.handleSubmit,children:/*#__PURE__*/_jsxs(\"fieldset\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-md-9 control-label\",children:\"Full Name\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-9\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"user_name\",onChange:this.handleChange,placeholder:\"Your name\",required:true,className:\"form-control\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-md-9 control-label\",children:\"Your E-mail\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-9\",children:/*#__PURE__*/_jsx(\"input\",{name:\"email\",type:\"text\",onChange:this.handleChange,placeholder:\"Your email\",className:\"form-control\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-md-9 control-label\",children:\"Your message\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-9\",children:/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",onChange:this.handleChange,name:\"message\",required:true,placeholder:\"Please enter your feedback here...\",rows:\"5\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-md-9 control-label\",htmlFor:\"message\",children:\"Your rating\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-9\",children:/*#__PURE__*/_jsx(\"select\",{name:\"rating\",className:\"form-control\",value:reviewStars,required:true,onChange:this.handleChange,children:options.map(function(option){return/*#__PURE__*/_jsx(\"option\",{value:option.value,children:option.label},option.value);})})})]}),this.state.toggle_spinner?/*#__PURE__*/_jsx(LoadingSpinnerLargeSuccess,{}):/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-success\",children:\"Send review\"}),/*#__PURE__*/_jsx(\"div\",{className:\"label\",children:this.state.review_sent?/*#__PURE__*/_jsxs(\"label\",{children:[\"New review is added to product with ID \",this.state.itemId]}):\"\"})]})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card-img\",children:/*#__PURE__*/_jsx(\"img\",{className:\"card-img\",src:this.state.image,alt:\"picture of product\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-1\"})]})})});}}]);return AddReview;}(Component);export{AddReview as default};","map":{"version":3,"sources":["/home/group16/data2410-portfolio-2/client/src/Components/Products/addReview.jsx"],"names":["React","Component","axios","LoadingSpinnerLargeSuccess","AddReview","props","handleChange","event","target","value","name","setState","handleSubmit","preventDefault","toggle_spinner","method","url","match","params","itemId","data","user","state","user_name","reviewText","message","rating","then","response","console","log","catch","error","review_sent","dateTime","Date","toDateString","email","bind","that","image","imageUrl","reviewStars","options","label","map","option"],"mappings":"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","sourcesContent":["import React, {Component,} from \"react\";\nimport axios from \"axios\";\nimport LoadingSpinnerLargeSuccess from \"../Spinners/LoadingSpinnerLargeSuccess\";\n\n\nexport default class AddReview extends Component{\n    constructor(props) {\n        super(props);\n        this.state = {\n            dateTime: (new Date()).toDateString(),\n            message: '',\n            rating: '',\n            user_name: '',\n            email: '',\n            toggle_spinner: false,\n            review_sent: false\n        }\n        this.handleChange = this.handleChange.bind(this);\n    }\n    handleChange = event => {\n        const target = event.target;\n        const value = target.value;\n        const name = target.name;\n\n        this.setState({\n            [name]: value\n        });\n    };\n\n    handleSubmit = async (event) => {\n        event.preventDefault();\n        this.setState({toggle_spinner: true})\n        await axios({\n            method: 'post',\n            url: '/api/products/addReview/'+this.props.match.params.itemId,\n            data: {\n                user: this.state.user_name,\n                reviewText: this.state.message,\n                rating: this.state.rating,\n            }\n        }).then(function(response){\n            console.log(\"Data: \", response.data);\n            this.setState({reviewText: response.data.message})\n        }).catch(function (error){\n            if (error.response){\n                console.log(error.response.data);\n            }\n        });\n        this.setState({toggle_spinner: false, review_sent: true})\n    };\n\n    async componentDidMount() {\n        const that = this;\n        await axios({\n            method: \"get\",\n            url: 'https://localhost:3001/api/products/get/'+this.props.match.params.itemId,\n        }).then(function (response) {\n            that.setState({name: response.data.name,\n                image: \"data:image/png;base64,\"+response.data.imageUrl[0].image,\n                itemId: response.data.itemId});\n        }).catch(function (error) {\n            if (!error.data) {\n                console.log(error.data)\n            }\n            console.log(error);\n        });\n    };\n\n    render() {\n    const { reviewStars } = this.state;\n    const options = [\n        {\n            label: \"1\",\n            value: \"1\",\n        }, {\n            label: \"2\",\n            value: \"2\",\n        }, {\n            label: \"3\",\n            value: \"3\",\n        }, {\n            label: \"4\",\n            value: \"4\",\n        }, {\n            label: \"5\",\n            value: \"5\",\n        }\n    ];\n    return(\n        <div className=\"review\">\n        <div className=\"productContainer\">\n                                <div className=\"row\">\n                                    <div className={\"col-lg-1\"}>\n                                    </div>\n                                <div className=\"col-lg-5\">\n                                    <div className=\"card-header\">Add review for item {this.state.name}</div>\n                                    <div className=\"card-body\">\n                                    <form onSubmit={this.handleSubmit}>\n                                        <fieldset>\n                                            <div className=\"form-group\">\n                                                <label className=\"col-md-9 control-label\">Full\n                                                    Name</label>\n                                                <div className=\"col-md-9\">\n                                                    <input type=\"text\" name=\"user_name\" onChange={this.handleChange} placeholder=\"Your name\" required={true}\n                                                           className=\"form-control\"/>\n                                                </div>\n                                            </div>\n                                            <div className=\"form-group\">\n                                                <label className=\"col-md-9 control-label\">Your\n                                                    E-mail</label>\n                                                <div className=\"col-md-9\">\n                                                    <input name=\"email\" type=\"text\" onChange={this.handleChange} placeholder=\"Your email\"\n                                                           className=\"form-control\"/>\n                                                </div>\n                                            </div>\n                                            <div className=\"form-group\">\n                                                <label className=\"col-md-9 control-label\">Your\n                                                    message</label>\n                                                <div className=\"col-md-9\">\n                                                    <textarea className=\"form-control\" onChange={this.handleChange} name=\"message\" required={true}\n                                                              placeholder=\"Please enter your feedback here...\"\n                                                              rows=\"5\"/>\n                                                </div>\n                                            </div>\n                                            <div className=\"form-group\">\n                                                <label className=\"col-md-9 control-label\" htmlFor=\"message\">Your\n                                                    rating</label>\n                                                <div className=\"col-md-9\">\n                                                    <select name=\"rating\" className=\"form-control\" value={reviewStars} required={true}\n                                                            onChange={this.handleChange}>\n                                                            {options.map((option) => (\n                                                                <option key={option.value} value={option.value}>\n                                                                    {option.label}</option>\n                                                            ))}\n                                                    </select>\n\n                                                </div>\n                                            </div>\n                                            {this.state.toggle_spinner ? <LoadingSpinnerLargeSuccess/>:\n                                                <button type=\"submit\" className=\"btn btn-success\">Send review</button>\n                                            }\n                                            <div className=\"label\">\n                                            {this.state.review_sent ? <label>New review is added to product with ID {this.state.itemId}</label>: \"\"}\n                                    </div>\n                                        </fieldset>\n                                    </form>\n                                </div>\n                                </div>\n                                <div className=\"col-lg-5\">\n                                    <div className=\"card-img\">\n                                    <img className=\"card-img\" src={this.state.image} alt = \"picture of product\"/>\n                                    </div>\n                                </div>\n                                    <div className={\"col-lg-1\"}>\n                                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n}"]},"metadata":{},"sourceType":"module"}