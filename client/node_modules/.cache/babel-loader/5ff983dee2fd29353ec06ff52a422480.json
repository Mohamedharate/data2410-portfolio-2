{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Havnaas\\\\Documents\\\\Intellj\\\\data2410-portfolio-2\\\\client\\\\src\\\\Components\\\\Admin\\\\AdminEditProduct.jsx\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport DangerFeedback from \"../dangerFeedback\";\nimport SuccessFeedback from \"../successFeedback\";\nimport LoadingSpinnerBtn from \"../LoadingSpinnerBtn\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass AdminEditProduct extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      products: [],\n      imagePreview: '',\n      itemId: Number,\n      old_imageArray: [],\n      old_product_name: String,\n      old_product_price: Number,\n      old_product_stock: Number,\n      old_product_category: String,\n      old_short_description: String,\n      old_long_description: String,\n      new_imageArray: [],\n      new_product_name: String,\n      new_product_price: Number,\n      new_product_stock: Number,\n      new_product_category: String,\n      new_short_description: String,\n      new_long_description: String,\n      toggle_submit_loading: false,\n      toggle_get_product_loading: false,\n      feedback_text: String,\n      toggle_error_feedback: false,\n      toggle_success_feedback: false\n    };\n\n    this.handleGetProducts = () => {\n      this.getProducts().then();\n    };\n\n    this.handleInputChange = event => {\n      const target = event.target;\n      const value = target.value;\n      const name = target.name;\n      this.setState({\n        ['new_' + name]: value\n      });\n    };\n\n    this.handleInputFile = event => {\n      const file = event.target.files[0]; //TODO make this work for a list of pictures.\n\n      this.setState({\n        imagePreview: URL.createObjectURL(file)\n      });\n      const new_imageArray = file;\n      this.setState({\n        new_imageArray\n      });\n    };\n\n    this.handleEditBtn = product => {\n      const preview = `data:${product.imageUrl[0].contentType};base64, ${product.imageUrl[0].image}`;\n      this.setState({\n        imagePreview: preview,\n        itemId: product.itemId,\n        old_imageArray: product.imageUrl,\n        old_product_name: product.name,\n        old_product_price: parseInt(product.price.$numberDecimal),\n        old_product_stock: product.quantity,\n        old_product_category: product.category,\n        old_short_description: product.descriptionShort,\n        old_long_description: product.descriptionLong,\n        new_imageArray: product.imageUrl,\n        new_product_name: product.name,\n        new_product_price: parseInt(product.price.$numberDecimal),\n        new_product_stock: product.quantity,\n        new_product_category: product.category,\n        new_short_description: product.descriptionShort,\n        new_long_description: product.descriptionLong\n      });\n    };\n\n    this.handleSubmit = async event => {\n      event.preventDefault();\n      let file = this.state.new_imageArray;\n      const itemId = this.state.itemId;\n      this.setState({\n        toggle_submit_loading: true\n      });\n      let formdata = new FormData(); // Checks which variables has changed and add changed variables to the form-data.\n\n      if (this.state.old_imageArray !== this.state.new_imageArray) {\n        formdata.append('imageUrl', file);\n      }\n\n      if (this.state.old_product_name !== this.state.new_product_name) {\n        formdata.append('name', this.state.new_product_name);\n      }\n\n      if (this.state.old_short_description !== this.state.new_short_description) {\n        formdata.append('descriptionShort', this.state.new_short_description);\n      }\n\n      if (this.state.old_long_description !== this.state.new_long_description) {\n        formdata.append('descriptionLong', this.state.new_long_description);\n      }\n\n      if (this.state.old_product_price !== this.state.new_product_price) {\n        formdata.append('price', this.state.new_product_price);\n      }\n\n      if (this.state.old_product_category !== this.state.new_product_category) {\n        formdata.append('category', this.state.new_product_category);\n      }\n\n      if (this.state.old_product_stock !== this.state.new_product_stock) {\n        formdata.append('quantity', this.state.new_product_stock);\n      }\n\n      await axios({\n        method: 'put',\n        url: `http://localhost:3001/api/products/update/${itemId}`,\n        data: formdata\n      }).then(res => {\n        this.setState({\n          toggle_success_feedback: true,\n          toggle_error_feedback: false,\n          feedback_text: res.data.Message\n        });\n      }).catch(err => {\n        this.setState({\n          toggle_success_feedback: false,\n          toggle_error_feedback: true,\n          feedback_text: err.response.data.Error\n        });\n      });\n      this.setState({\n        toggle_submit_loading: false\n      });\n    };\n\n    this.getProducts = async () => {\n      this.setState({\n        toggle_get_product_loading: true\n      });\n      await axios.get('http://localhost:3001/api/products/get/allProductsPure').then(res => {\n        const products = res.data;\n        this.setState({\n          products\n        });\n      }).then(res => {\n        this.setState({\n          toggle_success_feedback: true,\n          toggle_error_feedback: false,\n          feedback_text: res.data.Message\n        });\n      }).catch(err => {\n        this.setState({\n          toggle_success_feedback: false,\n          toggle_error_feedback: true,\n          feedback_text: err.response.Error\n        });\n      });\n      this.setState({\n        toggle_get_product_loading: false\n      });\n    };\n\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.handleInputFile = this.handleInputFile.bind(this);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fillPage\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row text-center mt-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-4\",\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Edit Products\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-4\",\n          children: this.state.toggle_get_product_loading ? /*#__PURE__*/_jsxDEV(LoadingSpinnerBtn, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 66\n          }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: this.handleGetProducts,\n            className: \"btn btn-primary\",\n            children: \"Get Products\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row text-center mt-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-sm-4 float-left one\",\n          children: this.state.products.map((product, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-group mt-2 ml-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: product.name,\n              disabled: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-group-append\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"input-group-text\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => this.handleEditBtn(product),\n                  className: \"btn\",\n                  children: \"Edit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 185,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 33\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 29\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-sm-8 text-left position-fixed offset-sm-3 mr-2 two\",\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: this.handleSubmit,\n            className: \"form-addProduct\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row form-label-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-6 m-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"uploadImage\",\n                  children: \"Upload Image:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 195,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"input-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"input-group-prepend\",\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"input-group-text\",\n                      id: \"uploadImg\",\n                      children: \"Upload Image\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 198,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 197,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"custom-file\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      onChange: this.handleInputFile,\n                      type: \"file\",\n                      className: \"form-control-file\",\n                      id: \"uploadImage\",\n                      name: \"imageUrl\",\n                      \"aria-describedby\": \"uploadImg\",\n                      multiple: true\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 201,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                      className: \"custom-file-label\",\n                      htmlFor: \"uploadImage\",\n                      children: \"Choose file..\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 205,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 200,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 196,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-sm-5\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Preview image:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 211,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                  className: \"previewImage\",\n                  src: this.state.imagePreview,\n                  alt: \"\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 212,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row form-label-group m-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-sm-6\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"mt-2\",\n                  htmlFor: \"product_name\",\n                  children: \"Product name:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 217,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  onChange: this.handleInputChange,\n                  className: \"form-control\",\n                  placeholder: \"Name\",\n                  name: \"product_name\",\n                  value: this.state.new_product_name,\n                  required: true,\n                  autoFocus: \"\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 218,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"mt-2\",\n                  htmlFor: \"product_price\",\n                  children: \"Product price:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 222,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"input-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"input-group-prepend\",\n                    children: /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"input-group-text\",\n                      children: \"$\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 225,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 224,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"number\",\n                    onChange: this.handleInputChange,\n                    className: \"form-control\",\n                    placeholder: \"Price\",\n                    name: \"product_price\",\n                    value: this.state.new_product_price,\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 227,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 223,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"mt-2\",\n                  htmlFor: \"product_stock\",\n                  children: \"Product Stock:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 231,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  onChange: this.handleInputChange,\n                  className: \"form-control\",\n                  placeholder: \"Stock\",\n                  name: \"product_stock\",\n                  value: this.state.new_product_stock,\n                  required: true,\n                  autoFocus: \"\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 232,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"mt-2\",\n                  htmlFor: \"product_category\",\n                  children: \"Category\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 236,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  name: \"product_category\",\n                  onChange: this.handleInputChange,\n                  className: \"custom-select my-1 mr-sm-2\",\n                  value: this.state.new_product_category,\n                  required: true,\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"\",\n                    defaultValue: \"\",\n                    children: \"Choose...\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 240,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"Coffee Capsules\",\n                    children: \"Coffee Capsules\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 241,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"Coffee Beans\",\n                    children: \"Coffee Beans\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 242,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"Filter Ground Coffee\",\n                    children: \"Filter Ground Coffee\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 243,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"Coffee Machine\",\n                    children: \"Coffee Machine\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 244,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"Coffee\",\n                    children: \"Coffee\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 245,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"Other\",\n                    children: \"Other\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 246,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 237,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 216,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-sm-5\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"mt-2\",\n                  htmlFor: \"short_description\",\n                  children: \"Short Description:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 250,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  onChange: this.handleInputChange,\n                  className: \"form-control\",\n                  placeholder: \"Short Description\",\n                  value: this.state.new_short_description,\n                  rows: \"3\",\n                  name: \"short_description\",\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 251,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"mt-2\",\n                  htmlFor: \"long_description\",\n                  children: \"Long Description:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 254,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  onChange: this.handleInputChange,\n                  className: \"form-control\",\n                  placeholder: \"Long Description\",\n                  value: this.state.new_long_description,\n                  rows: \"6\",\n                  name: \"long_description\",\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 255,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 249,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row m-2\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-md-3\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"submit\",\n                  className: \"btn btn-lg btn-primary btn-block mt-2\",\n                  children: \"Update Product\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 262,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 261,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 29\n            }, this), this.state.toggle_error_feedback && /*#__PURE__*/_jsxDEV(DangerFeedback, {\n              feedback_error_text: this.state.feedback_text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 29\n            }, this), this.state.toggle_success_feedback && /*#__PURE__*/_jsxDEV(SuccessFeedback, {\n              feedback_success_text: this.state.feedback_text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default AdminEditProduct;","map":{"version":3,"sources":["C:/Users/Havnaas/Documents/Intellj/data2410-portfolio-2/client/src/Components/Admin/AdminEditProduct.jsx"],"names":["React","Component","axios","DangerFeedback","SuccessFeedback","LoadingSpinnerBtn","AdminEditProduct","constructor","props","state","products","imagePreview","itemId","Number","old_imageArray","old_product_name","String","old_product_price","old_product_stock","old_product_category","old_short_description","old_long_description","new_imageArray","new_product_name","new_product_price","new_product_stock","new_product_category","new_short_description","new_long_description","toggle_submit_loading","toggle_get_product_loading","feedback_text","toggle_error_feedback","toggle_success_feedback","handleGetProducts","getProducts","then","handleInputChange","event","target","value","name","setState","handleInputFile","file","files","URL","createObjectURL","handleEditBtn","product","preview","imageUrl","contentType","image","parseInt","price","$numberDecimal","quantity","category","descriptionShort","descriptionLong","handleSubmit","preventDefault","formdata","FormData","append","method","url","data","res","Message","catch","err","response","Error","get","bind","render","map","index"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\r\nimport axios from \"axios\";\r\nimport DangerFeedback from \"../dangerFeedback\";\r\nimport SuccessFeedback from \"../successFeedback\";\r\nimport LoadingSpinnerBtn from \"../LoadingSpinnerBtn\";\r\n\r\nclass AdminEditProduct extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.handleInputChange = this.handleInputChange.bind(this)\r\n        this.handleInputFile = this.handleInputFile.bind(this)\r\n    }\r\n    state = {\r\n        products: [],\r\n        imagePreview: '',\r\n        itemId: Number,\r\n\r\n        old_imageArray: [],\r\n        old_product_name: String,\r\n        old_product_price: Number,\r\n        old_product_stock: Number,\r\n        old_product_category: String,\r\n        old_short_description: String,\r\n        old_long_description: String,\r\n\r\n        new_imageArray: [],\r\n        new_product_name: String,\r\n        new_product_price: Number,\r\n        new_product_stock: Number,\r\n        new_product_category: String,\r\n        new_short_description: String,\r\n        new_long_description: String,\r\n\r\n        toggle_submit_loading: false,\r\n        toggle_get_product_loading: false,\r\n        feedback_text: String,\r\n        toggle_error_feedback: false,\r\n        toggle_success_feedback: false,\r\n    };\r\n\r\n    handleGetProducts = () => {\r\n        this.getProducts().then()\r\n    };\r\n    handleInputChange = event => {\r\n        const target = event.target;\r\n        const value = target.value;\r\n        const name = target.name;\r\n\r\n        this.setState({\r\n            ['new_'+name]: value\r\n        })\r\n    };\r\n    handleInputFile = event => {\r\n        const file = event.target.files[0]; //TODO make this work for a list of pictures.\r\n\r\n        this.setState({imagePreview: URL.createObjectURL(file)})\r\n\r\n        const new_imageArray = file;\r\n        this.setState({new_imageArray});\r\n    }\r\n    handleEditBtn = product => {\r\n\r\n        const preview = `data:${product.imageUrl[0].contentType};base64, ${product.imageUrl[0].image}`\r\n\r\n        this.setState({\r\n            imagePreview: preview,\r\n            itemId: product.itemId,\r\n\r\n            old_imageArray: product.imageUrl,\r\n            old_product_name: product.name,\r\n            old_product_price: parseInt(product.price.$numberDecimal),\r\n            old_product_stock: product.quantity,\r\n            old_product_category: product.category,\r\n            old_short_description: product.descriptionShort,\r\n            old_long_description: product.descriptionLong,\r\n\r\n            new_imageArray: product.imageUrl,\r\n            new_product_name: product.name,\r\n            new_product_price: parseInt(product.price.$numberDecimal),\r\n            new_product_stock: product.quantity,\r\n            new_product_category: product.category,\r\n            new_short_description: product.descriptionShort,\r\n            new_long_description: product.descriptionLong,\r\n\r\n        })\r\n\r\n    }\r\n    handleSubmit =  async event => {\r\n        event.preventDefault();\r\n\r\n        let file = this.state.new_imageArray;\r\n        const itemId = this.state.itemId;\r\n        this.setState({toggle_submit_loading: true});\r\n\r\n        let formdata = new FormData();\r\n\r\n        // Checks which variables has changed and add changed variables to the form-data.\r\n        if (this.state.old_imageArray !== this.state.new_imageArray) {\r\n            formdata.append('imageUrl', file);\r\n        }\r\n        if (this.state.old_product_name !== this.state.new_product_name) {\r\n            formdata.append('name', this.state.new_product_name);\r\n        }\r\n        if (this.state.old_short_description !== this.state.new_short_description) {\r\n            formdata.append('descriptionShort', this.state.new_short_description);\r\n        }\r\n        if (this.state.old_long_description !== this.state.new_long_description) {\r\n            formdata.append('descriptionLong', this.state.new_long_description);\r\n        }\r\n        if (this.state.old_product_price !== this.state.new_product_price) {\r\n            formdata.append('price', this.state.new_product_price);\r\n        }\r\n        if (this.state.old_product_category !== this.state.new_product_category) {\r\n            formdata.append('category', this.state.new_product_category);\r\n        }\r\n        if (this.state.old_product_stock !== this.state.new_product_stock) {\r\n            formdata.append('quantity', this.state.new_product_stock);\r\n        }\r\n\r\n        await axios({\r\n            method: 'put',\r\n            url: `http://localhost:3001/api/products/update/${itemId}`,\r\n            data: formdata,\r\n        }).then(res => {\r\n            this.setState({\r\n                toggle_success_feedback: true,\r\n                toggle_error_feedback: false,\r\n                feedback_text: res.data.Message,\r\n            });\r\n        }).catch(err => {\r\n            this.setState({\r\n                toggle_success_feedback: false,\r\n                toggle_error_feedback: true,\r\n                feedback_text: err.response.data.Error,\r\n            });\r\n        });\r\n        this.setState({toggle_submit_loading: false});\r\n    };\r\n\r\n    getProducts = async() => {\r\n        this.setState({toggle_get_product_loading: true});\r\n        await axios.get('http://localhost:3001/api/products/get/allProductsPure')\r\n            .then(res => {\r\n                const products = res.data\r\n                this.setState({products})\r\n            }).then(res => {\r\n                this.setState({\r\n                    toggle_success_feedback: true,\r\n                    toggle_error_feedback: false,\r\n                    feedback_text: res.data.Message,\r\n                });\r\n            }).catch(err => {\r\n                this.setState({\r\n                    toggle_success_feedback: false,\r\n                    toggle_error_feedback: true,\r\n                    feedback_text: err.response.Error,\r\n                });\r\n            });\r\n        this.setState({toggle_get_product_loading: false});\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"fillPage\">\r\n                <div className=\"row text-center mt-5\">\r\n                    <div className=\"col-md-4\"/>\r\n                    <div className=\"col-md-4\">\r\n                        <h3>Edit Products</h3>\r\n                    </div>\r\n                    <div className=\"col-md-4\">\r\n                        {this.state.toggle_get_product_loading ? <LoadingSpinnerBtn/> :\r\n                            <button onClick={this.handleGetProducts} className=\"btn btn-primary\">\r\n                                Get Products\r\n                            </button>}\r\n                    </div>\r\n                </div>\r\n                <div className=\"row text-center mt-5\">\r\n                    <div className=\"col-sm-4 float-left one\">\r\n                        {this.state.products.map((product, index) => (\r\n                            <div className=\"input-group mt-2 ml-2\" key={index}>\r\n                                <input type=\"text\" value={product.name} disabled/>\r\n                                <div className=\"input-group-append\">\r\n                                    <div className=\"input-group-text\">\r\n                                        <button onClick={() => this.handleEditBtn(product)} className=\"btn\">Edit</button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                    <div className=\"col-sm-8 text-left position-fixed offset-sm-3 mr-2 two\">\r\n                        <form onSubmit={this.handleSubmit} className=\"form-addProduct\">\r\n                            <div className=\"row form-label-group\">\r\n                                <div className=\"col-6 m-4\">\r\n                                    <label htmlFor=\"uploadImage\">Upload Image:</label>\r\n                                    <div className=\"input-group\">\r\n                                        <div className=\"input-group-prepend\">\r\n                                            <span className=\"input-group-text\" id=\"uploadImg\">Upload Image</span>\r\n                                        </div>\r\n                                        <div className=\"custom-file\">\r\n                                            <input onChange={this.handleInputFile} type=\"file\"\r\n                                                   className=\"form-control-file\"\r\n                                                   id=\"uploadImage\"\r\n                                                   name=\"imageUrl\" aria-describedby=\"uploadImg\" multiple/>\r\n                                            <label className=\"custom-file-label\"\r\n                                                   htmlFor=\"uploadImage\">Choose file..</label>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"col-sm-5\">\r\n                                    <p>Preview image:</p>\r\n                                    <img className=\"previewImage\" src={this.state.imagePreview} alt=\"\"/>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"row form-label-group m-2\">\r\n                                <div className=\"col-sm-6\">\r\n                                    <label className=\"mt-2\" htmlFor=\"product_name\">Product name:</label>\r\n                                    <input type=\"text\" onChange={this.handleInputChange}\r\n                                           className=\"form-control\" placeholder=\"Name\"\r\n                                           name=\"product_name\" value={this.state.new_product_name} required\r\n                                           autoFocus=\"\"/>\r\n                                    <label className=\"mt-2\" htmlFor=\"product_price\">Product price:</label>\r\n                                    <div className=\"input-group\">\r\n                                        <div className=\"input-group-prepend\">\r\n                                            <span className=\"input-group-text\">$</span>\r\n                                        </div>\r\n                                        <input type=\"number\" onChange={this.handleInputChange}\r\n                                               className=\"form-control\" placeholder=\"Price\"\r\n                                               name=\"product_price\" value={this.state.new_product_price} required/>\r\n                                    </div>\r\n                                    <label className=\"mt-2\" htmlFor=\"product_stock\">Product Stock:</label>\r\n                                    <input type=\"number\" onChange={this.handleInputChange}\r\n                                           className=\"form-control\" placeholder=\"Stock\"\r\n                                           name=\"product_stock\" value={this.state.new_product_stock} required\r\n                                           autoFocus=\"\"/>\r\n                                    <label className=\"mt-2\" htmlFor=\"product_category\">Category</label>\r\n                                    <select name=\"product_category\" onChange={this.handleInputChange}\r\n                                            className=\"custom-select my-1 mr-sm-2\"\r\n                                            value={this.state.new_product_category} required>\r\n                                        <option value=\"\" defaultValue=\"\">Choose...</option>\r\n                                        <option value=\"Coffee Capsules\">Coffee Capsules</option>\r\n                                        <option value=\"Coffee Beans\">Coffee Beans</option>\r\n                                        <option value=\"Filter Ground Coffee\">Filter Ground Coffee</option>\r\n                                        <option value=\"Coffee Machine\">Coffee Machine</option>\r\n                                        <option value=\"Coffee\">Coffee</option>\r\n                                        <option value=\"Other\">Other</option>\r\n                                    </select>\r\n                                </div>\r\n                                <div className=\"col-sm-5\">\r\n                                    <label className=\"mt-2\" htmlFor=\"short_description\">Short Description:</label>\r\n                                    <textarea onChange={this.handleInputChange} className=\"form-control\"\r\n                                              placeholder=\"Short Description\" value={this.state.new_short_description}\r\n                                              rows=\"3\" name=\"short_description\" required/>\r\n                                    <label className=\"mt-2\" htmlFor=\"long_description\">Long Description:</label>\r\n                                    <textarea onChange={this.handleInputChange} className=\"form-control\"\r\n                                              placeholder=\"Long Description\" value={this.state.new_long_description}\r\n                                              rows=\"6\" name=\"long_description\" required/>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"row m-2\">\r\n                                <div className=\"col-md-3\">\r\n                                    <button type=\"submit\" className=\"btn btn-lg btn-primary btn-block mt-2\">\r\n                                        Update Product\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                            {this.state.toggle_error_feedback &&\r\n                            <DangerFeedback feedback_error_text={this.state.feedback_text}/>}\r\n                            {this.state.toggle_success_feedback &&\r\n                            <SuccessFeedback feedback_success_text={this.state.feedback_text}/>}\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default AdminEditProduct;"]},"metadata":{},"sourceType":"module"}