{"ast":null,"code":"import _objectSpread from\"C:/Users/Gjesterom/IdeaProjects/data2410-portfolio-2/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"C:/Users/Gjesterom/IdeaProjects/data2410-portfolio-2/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Gjesterom/IdeaProjects/data2410-portfolio-2/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/Users/Gjesterom/IdeaProjects/data2410-portfolio-2/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/Gjesterom/IdeaProjects/data2410-portfolio-2/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/Gjesterom/IdeaProjects/data2410-portfolio-2/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/Gjesterom/IdeaProjects/data2410-portfolio-2/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import axios from\"axios\";import Navbar from\"./navbar\";import Login from\"./login\";import Register from\"./register\";import Bestsellers from\"./bestsellers\";import Mainpage from\"./mainpage\";import Footer from\"./footer\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Home=/*#__PURE__*/function(_Component){_inherits(Home,_Component);var _super=_createSuper(Home);function Home(){var _this;_classCallCheck(this,Home);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={toggleLogin:false,toggleRegister:false,isAuthenticated:false,current_user:{}};_this.handleToggleLoginCallback=function(){_this.setState({toggleLogin:!_this.state.toggleLogin,toggleRegister:false});};_this.handleToggleRegisterCallback=function(){_this.setState({toggleLogin:false,toggleRegister:!_this.state.toggleRegister});};_this.handleLogin=function(){_this.tryIsAuthenticated().then();};return _this;}_createClass(Home,[{key:\"tryIsAuthenticated\",value:function(){var _tryIsAuthenticated=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this2=this;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('http://localhost:3001/api/users/isAuthenticated').then(function(response){_this2.state.isAuthenticated=true;console.log(response.data);_this2.state.current_user=response.data;console.log(\"Session set!\");console.log(_this2.state.current_user.firstName);}).catch(function(error){_this2.state.isAuthenticated=false;_this2.state.current_user={};console.log(\"No session available: \",error.data);});case 2:case\"end\":return _context.stop();}}},_callee);}));function tryIsAuthenticated(){return _tryIsAuthenticated.apply(this,arguments);}return tryIsAuthenticated;}()},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(Mainpage,{}),/*#__PURE__*/_jsx(Bestsellers,{}),/*#__PURE__*/_jsx(Footer,{}),/*#__PURE__*/_jsx(Navbar,_objectSpread({toggleLoginCallback:this.handleToggleLoginCallback,toggleRegisterCallback:this.handleToggleRegisterCallback},this.props)),this.state.toggleLogin&&/*#__PURE__*/_jsx(Login,{loginCallback:this.handleLogin}),this.state.toggleRegister&&/*#__PURE__*/_jsx(Register,{registerCallback:this.handleToggleLoginCallback})]});}}]);return Home;}(Component);export default Home;","map":{"version":3,"sources":["C:/Users/Gjesterom/IdeaProjects/data2410-portfolio-2/client/src/Components/home.jsx"],"names":["React","Component","axios","Navbar","Login","Register","Bestsellers","Mainpage","Footer","Home","state","toggleLogin","toggleRegister","isAuthenticated","current_user","handleToggleLoginCallback","setState","handleToggleRegisterCallback","handleLogin","tryIsAuthenticated","then","get","response","console","log","data","firstName","catch","error","props"],"mappings":"0sCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,MAAOC,CAAAA,KAAP,KAAkB,SAAlB,CACA,MAAOC,CAAAA,QAAP,KAAqB,YAArB,CACA,MAAOC,CAAAA,WAAP,KAAwB,eAAxB,CACA,MAAOC,CAAAA,QAAP,KAAqB,YAArB,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,C,2FAGMC,CAAAA,I,mTACFC,K,CAAQ,CACJC,WAAW,CAAE,KADT,CAEJC,cAAc,CAAE,KAFZ,CAGJC,eAAe,CAAE,KAHb,CAIJC,YAAY,CAAE,EAJV,C,OAORC,yB,CAA4B,UAAM,CAC9B,MAAKC,QAAL,CAAc,CAACL,WAAW,CAAE,CAAC,MAAKD,KAAL,CAAWC,WAA1B,CAAuCC,cAAc,CAAE,KAAvD,CAAd,EACH,C,OACDK,4B,CAA+B,UAAM,CACjC,MAAKD,QAAL,CAAc,CAACL,WAAW,CAAE,KAAd,CAAqBC,cAAc,CAAE,CAAC,MAAKF,KAAL,CAAWE,cAAjD,CAAd,EACH,C,OACDM,W,CAAc,UAAM,CAChB,MAAKC,kBAAL,GAA0BC,IAA1B,GACH,C,6JAED,yKACUlB,CAAAA,KAAK,CAACmB,GAAN,CAAU,iDAAV,EACDD,IADC,CACI,SAAAE,QAAQ,CAAI,CACd,MAAI,CAACZ,KAAL,CAAWG,eAAX,CAA6B,IAA7B,CACAU,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACG,IAArB,EACA,MAAI,CAACf,KAAL,CAAWI,YAAX,CAA0BQ,QAAQ,CAACG,IAAnC,CACAF,OAAO,CAACC,GAAR,CAAY,cAAZ,EACAD,OAAO,CAACC,GAAR,CAAY,MAAI,CAACd,KAAL,CAAWI,YAAX,CAAwBY,SAApC,EACH,CAPC,EAOCC,KAPD,CAOO,SAAAC,KAAK,CAAI,CACd,MAAI,CAAClB,KAAL,CAAWG,eAAX,CAA6B,KAA7B,CACA,MAAI,CAACH,KAAL,CAAWI,YAAX,CAA0B,EAA1B,CACAS,OAAO,CAACC,GAAR,CAAY,wBAAZ,CAAsCI,KAAK,CAACH,IAA5C,EACH,CAXC,CADV,uD,sIAeA,iBAAS,CACL,mBACI,MAAC,KAAD,CAAO,QAAP,yBACI,KAAC,QAAD,IADJ,cAEI,KAAC,WAAD,IAFJ,cAGI,KAAC,MAAD,IAHJ,cAII,KAAC,MAAD,gBACI,mBAAmB,CAAI,KAAKV,yBADhC,CAEI,sBAAsB,CAAI,KAAKE,4BAFnC,EAGQ,KAAKY,KAHb,EAJJ,CASK,KAAKnB,KAAL,CAAWC,WAAX,eAA0B,KAAC,KAAD,EAAO,aAAa,CAAI,KAAKO,WAA7B,EAT/B,CAUK,KAAKR,KAAL,CAAWE,cAAX,eAA6B,KAAC,QAAD,EAAU,gBAAgB,CAAI,KAAKG,yBAAnC,EAVlC,GADJ,CAcH,C,kBAhDcd,S,EAkDnB,cAAeQ,CAAAA,IAAf","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport Navbar from \"./navbar\";\r\nimport Login from \"./login\";\r\nimport Register from \"./register\";\r\nimport Bestsellers from \"./bestsellers\";\r\nimport Mainpage from \"./mainpage\";\r\nimport Footer from \"./footer\";\r\n\r\n\r\nclass Home extends Component{\r\n    state = {\r\n        toggleLogin: false,\r\n        toggleRegister: false,\r\n        isAuthenticated: false,\r\n        current_user: {},\r\n    }\r\n\r\n    handleToggleLoginCallback = () => {\r\n        this.setState({toggleLogin: !this.state.toggleLogin, toggleRegister: false})\r\n    }\r\n    handleToggleRegisterCallback = () => {\r\n        this.setState({toggleLogin: false, toggleRegister: !this.state.toggleRegister})\r\n    }\r\n    handleLogin = () => {\r\n        this.tryIsAuthenticated().then()\r\n    }\r\n\r\n    async tryIsAuthenticated() {\r\n        await axios.get('http://localhost:3001/api/users/isAuthenticated')\r\n            .then(response => {\r\n                this.state.isAuthenticated = true;\r\n                console.log(response.data)\r\n                this.state.current_user = response.data;\r\n                console.log(\"Session set!\")\r\n                console.log(this.state.current_user.firstName)\r\n            }).catch(error => {\r\n                this.state.isAuthenticated = false;\r\n                this.state.current_user = {};\r\n                console.log(\"No session available: \", error.data);\r\n            })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n                <Mainpage />\r\n                <Bestsellers />\r\n                <Footer />\r\n                <Navbar\r\n                    toggleLoginCallback = {this.handleToggleLoginCallback}\r\n                    toggleRegisterCallback = {this.handleToggleRegisterCallback}\r\n                    {...this.props}\r\n                />\r\n                {this.state.toggleLogin && <Login loginCallback = {this.handleLogin}/>}\r\n                {this.state.toggleRegister && <Register registerCallback = {this.handleToggleLoginCallback}/>}\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\nexport default Home;"]},"metadata":{},"sourceType":"module"}